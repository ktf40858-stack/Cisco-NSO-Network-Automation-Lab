! NSO VLAN Service Configuration
! Service definitions for VLAN management in lab environment

! ====================================
! VLAN 42 - The Answer
! ====================================

! Direct device configuration for VLAN 42
devices device dev-dist-sw01 config
 vlan 42
  name TheAnswer
 !
 interface Vlan42
  description "The Answer VLAN Interface"
  no shutdown
  ip address 10.42.42.42/24
  no ip redirects
  no ipv6 redirects
 !
!

! ====================================
! STANDARD VLAN SERVICES
! ====================================

! Management VLAN
services vlan-service vlan-1
 device edge-sw01
 device dev-dist-sw01
 vlan-id 1
 vlan-name DEFAULT
 description "Default Management VLAN"
!

! Data VLAN
services vlan-service vlan-10
 device edge-sw01
 device dev-dist-sw01
 vlan-id 10
 vlan-name DATA
 description "User Data VLAN"
!

! Voice VLAN
services vlan-service vlan-20
 device edge-sw01
 device dev-dist-sw01
 vlan-id 20
 vlan-name VOICE
 description "VoIP Traffic VLAN"
!

! Guest VLAN
services vlan-service vlan-30
 device edge-sw01
 device dev-dist-sw01
 vlan-id 30
 vlan-name GUEST
 description "Guest Access VLAN"
!

! Management VLAN
services vlan-service vlan-100
 device-group VLAN-CAPABLE
 vlan-id 100
 vlan-name MANAGEMENT
 description "Network Management VLAN"
!

! Server VLAN
services vlan-service vlan-200
 device dev-dist-sw01
 vlan-id 200
 vlan-name SERVERS
 description "Server Farm VLAN"
!

! DMZ VLAN
services vlan-service vlan-300
 device dev-dist-sw01
 vlan-id 300
 vlan-name DMZ
 description "DMZ Network VLAN"
!

! Test VLAN
services vlan-service vlan-999
 device-group VLAN-CAPABLE
 vlan-id 999
 vlan-name TEST
 description "Testing and Development VLAN"
!

! ====================================
! VLAN INTERFACE CONFIGURATIONS
! ====================================

! SVI for Management VLAN on NX-OS
devices device dev-dist-sw01 config
 interface Vlan100
  description "Management SVI"
  no shutdown
  ip address 10.100.100.1/24
  no ip redirects
 !
!

! SVI for Server VLAN on NX-OS
devices device dev-dist-sw01 config
 interface Vlan200
  description "Server SVI"
  no shutdown
  ip address 10.200.200.1/24
  no ip redirects
 !
!

! SVI for DMZ VLAN on NX-OS
devices device dev-dist-sw01 config
 interface Vlan300
  description "DMZ SVI"
  no shutdown
  ip address 10.300.300.1/24
  no ip redirects
 !
!

! ====================================
! TRUNK PORT CONFIGURATIONS
! ====================================

! Trunk configuration service
services trunk-service uplink-trunk
 source-device dev-dist-sw01
 interface Ethernet1/1
 mode trunk
 allowed-vlans 1,10,20,30,42,100,200,300,999
 native-vlan 1
!

! ====================================
! ACCESS PORT CONFIGURATIONS
! ====================================

! Access port for Data VLAN
services access-port-service data-ports
 device edge-sw01
 interface-range GigabitEthernet0/1-10
 vlan 10
 mode access
 spanning-tree portfast
!

! Access port for Voice VLAN
services access-port-service voice-ports
 device edge-sw01
 interface-range GigabitEthernet0/11-20
 vlan 20
 mode access
 spanning-tree portfast
!

! ====================================
! VLAN RANGE SERVICE
! ====================================

! Development VLANs Range
services vlan-range-service dev-vlans
 device dev-dist-sw01
 start-vlan 400
 end-vlan 499
 name-prefix DEV
 description "Development VLANs 400-499"
!

! Test VLANs Range
services vlan-range-service test-vlans
 device-group VLAN-CAPABLE
 start-vlan 900
 end-vlan 998
 name-prefix TEST
 description "Test VLANs 900-998"
!

! ====================================
! INTER-VLAN ROUTING
! ====================================

! Enable routing between VLANs on NX-OS
devices device dev-dist-sw01 config
 feature interface-vlan
 ip routing
!