<?xml version="1.0" encoding="UTF-8"?>
<config xmlns="http://tail-f.com/ns/config/1.0">
  <devices xmlns="http://tail-f.com/ns/ncs">
    <device>
      <name>{/device}</name>
      <config>

        <!-- DNS configuration for Cisco NX-OS devices -->
        <?if {device-type[contains(., 'nx')]}?>
        <ip xmlns="http://tail-f.com/ned/cisco-nx">
          <name-server>
            <servers>208.67.222.222</servers>
          </name-server>
          <name-server>
            <servers>208.67.220.220</servers>
          </name-server>
          <?if {/tertiary-dns}?>
          <name-server>
            <servers>{/tertiary-dns}</servers>
          </name-server>
          <?end?>
          <?if {/domain-name}?>
          <domain-name>{/domain-name}</domain-name>
          <?end?>
        </ip>
        <?end?>

        <!-- DNS configuration for Cisco IOS devices -->
        <?if {device-type[contains(., 'ios')] and not(device-type[contains(., 'iosxr')])}?>
        <ip xmlns="urn:ios">
          <name-server>
            <name-server-list>208.67.222.222</name-server-list>
          </name-server>
          <name-server>
            <name-server-list>208.67.220.220</name-server-list>
          </name-server>
          <?if {/tertiary-dns}?>
          <name-server>
            <name-server-list>{/tertiary-dns}</name-server-list>
          </name-server>
          <?end?>
          <domain>
            <name>lab.local</name>
          </domain>
          <domain>
            <lookup/>
          </domain>
        </ip>
        <?end?>

        <!-- DNS configuration for Cisco IOS-XR devices -->
        <?if {device-type[contains(., 'iosxr')]}?>
        <domain xmlns="http://tail-f.com/ned/cisco-ios-xr">
          <name-server>
            <address>208.67.222.222</address>
          </name-server>
          <name-server>
            <address>208.67.220.220</address>
          </name-server>
          <?if {/tertiary-dns}?>
          <name-server>
            <address>{/tertiary-dns}</address>
          </name-server>
          <?end?>
          <name>lab.local</name>
        </domain>
        <?end?>

        <!-- DNS configuration for Cisco ASA devices -->
        <?if {device-type[contains(., 'asa')]}?>
        <dns xmlns="http://tail-f.com/ned/cisco-asa">
          <domain-lookup>
            <ifc>
              <interface>management</interface>
            </ifc>
          </domain-lookup>
          <server-group>
            <name>DefaultDNS</name>
            <name-server>
              <ns-address>208.67.222.222</ns-address>
            </name-server>
            <name-server>
              <ns-address>208.67.220.220</ns-address>
            </name-server>
            <?if {/tertiary-dns}?>
            <name-server>
              <ns-address>{/tertiary-dns}</ns-address>
            </name-server>
            <?end?>
            <domain-name>lab.local</domain-name>
          </server-group>
        </dns>
        <?end?>

      </config>
    </device>
  </devices>
</config>